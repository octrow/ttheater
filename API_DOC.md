# API документация для проекта сайта для театра

## Общая информация

- Базовый URL: https://total-theater.com/api/v1
- Формат данных: JSON
- Методы запросов: GET, POST
- Аутентификация: Bearer token
- Кодировка: UTF-8

## Описание ресурсов

### Спектакли

- URL: /shows
- Описание: Ресурс для получения информации о спектаклях театра
- Параметры:
  - category: опциональный, строка, фильтр по категории спектакля (adults, family, kids)
- Методы:
  - GET: получить список всех спектаклей или спектаклей по категории
    - Пример запроса: GET https://total-theater.com/api/v1/shows?category=adults
    - Пример ответа:
      ```
      [
        {
          "id": 1,
          "title": "Гамлет",
          "category": "adults",
          "date": "2023-11-01",
          "price": 1000
        },
        {
          "id": 2,
          "title": "Ромео и Джульетта",
          "category": "adults",
          "date": "2023-11-02",
          "price": 1200
        }
      ]
      ```
    - Коды состояния:
      - 200: успешный ответ
      - 400: неверный запрос
      - 500: внутренняя ошибка сервера

- URL: /shows/{show_id}
- Описание: Ресурс для получения информации о конкретном спектакле по его идентификатору
- Параметры:
  - show_id: обязательный, целое число, идентификатор спектакля
- Методы:
  - GET: получить информацию о спектакле по его идентификатору
    - Пример запроса: GET https://total-theater.com/api/v1/shows/1
    - Пример ответа:
      ```
      {
        "id": 1,
        "title": "Гамлет",
        "category": "adults",
        "date": "2023-11-01T19:00:00",
        "price": 1000,
        "image_url": "https://total-theater.com/images/hamlet.jpg",
        "description": "Трагедия Уильяма Шекспира о принце Дании, который мстит за убийство своего отца"
      }
      ```
    - Коды состояния:
      - 200: успешный ответ
      - 404: спектакль не найден

### Билеты

- URL: /tickets
- Описание: Ресурс для получения и покупки билетов на спектакли для авторизованного пользователя
- Параметры: нет
- Методы:
  - GET: получить список всех купленных билетов для авторизованного пользователя
    - Пример запроса: GET https://total-theater.com/api/v1/tickets (с заголовком Authorization: Bearer <token>)
    - Пример ответа:
      ```
      [
        {
          "id": 1,
          "show_id": 1,
          "show_title": "Гамлет",
          "show_date": "2023-11-01T19:00:00"
        },
        {
          "id": 2,
          "show_id": 2,
          "show_title": "Ромео и Джульетта",
          "show_date": "2023-11-02T19:00:00"
        }
      ]
      ```
    - Коды состояния:
      - 200: успешный ответ
      - 401: неавторизованный запрос

  - POST: купить билет на спектакль для авторизованного пользователя
    - Пример запроса: POST https://total-theater.com/api/v1/tickets (с заголовком Authorization: Bearer <token> и телом {"show_id": 1})
    - Пример ответа:
      ```
      {
        "id": 3,
        "show_id": 1,
        "show_title": "Гамлет",
        "show_date": "2023-11-01T19:00:00",
        "user_id": 42
      }
      ```
    - Коды состояния:
      - 201: успешное создание билета
      - 400: неверный запрос
      - 401: неавторизованный запрос
      - 404: спектакль не найден

- URL: /tickets/{ticket_id}
- Описание: Ресурс для получения информации о конкретном билете по его идентификатору для авторизованного пользователя
- Параметры:
  - ticket_id: обязательный, целое число, идентификатор билета
- Методы:
  - GET: получить информацию о билете по его идентификатору для авторизованного пользователя
    - Пример запроса: GET https://total-theater.com/api/v1/tickets/3 (с заголовком Authorization: Bearer <token>)
    - Пример ответа:
      ```
      {
        "id": 3,
        "show_id": 1,
        "show_title": "Гамлет",
        "show_date": "2023-11-01T19:00:00",
        "user_id": 42
      }
      ```
    - Коды состояния:
      - 200: успешный ответ
      - 401: неавторизованный запрос
      - 404: билет не найден
